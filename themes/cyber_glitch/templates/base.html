<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ page_title or (site_title or 'Noteblog') }}{% endblock %}</title>
    <meta name="description" content="{% block description %}{{ site_description or '' }}{% endblock %}">
    
    {% if get_theme_config().site_favicon %}
    <link rel="icon" href="{{ get_theme_config().site_favicon }}">
    {% endif %}

    <link rel="stylesheet" href="/themes/cyber_glitch/static/css/style.css">
    
    <style>
        :root {
            --cg-primary: {{ get_theme_config().primary_color or '#39ff14' }};
            --cg-secondary: {{ get_theme_config().secondary_color or '#ff00ff' }};
            --cg-bg: {{ get_theme_config().background_color or '#0a0a0a' }};
            --cg-text: {{ get_theme_config().text_color or '#e0e0e0' }};
        }
    </style>

    {% block head %}{% endblock %}
    
    {% if plugin_hooks and plugin_hooks.head_assets %}
        {% for asset_content in plugin_hooks.head_assets %}
            {{ asset_content|safe }}
        {% endfor %}
    {% endif %}
</head>
<body>
    <header>
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <a href="/" class="logo" data-text="{{ site_title or 'NOTEBLOG' }}">
                    {{ site_title or 'NOTEBLOG' }}
                </a>
                <nav>
                    <ul>
                        <li><a href="/">首页</a></li>
                        <li><a href="/archives">归档</a></li>
                        <li><a href="/about">关于</a></li>
                        {% if current_user and current_user.is_authenticated %}
                        <li><a href="/admin">管理</a></li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="container">
            <p>&copy; {{ current_year }} {{ site_title or 'Noteblog' }}. Powered by Noteblog & Cyber Glitch.</p>
        </div>
    </footer>

    <script src="/themes/cyber_glitch/static/js/main.js"></script>
    
    {% if plugin_hooks and plugin_hooks.footer_assets %}
        {% for asset_content in plugin_hooks.footer_assets %}
            {{ asset_content|safe }}
        {% endfor %}
    {% endif %}
</body>
</html>
