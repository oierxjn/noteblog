{% extends "base.html" %}

{% block title %}#{{ tag.name }} - {{ site_title or 'Noteblog' }}{% endblock %}

{% block hero %}
<section class="hoshi-hero" style="margin-top:1.5rem;">
    <div class="hoshi-hero-left">
        <span class="hoshi-hero-tag">Tag</span>
        <h1 class="hoshi-hero-title">#{{ tag.name }}</h1>
        <p class="hoshi-hero-desc">关于 {{ tag.name }} 的所有脑内星屑。</p>
    </div>
    <div class="hoshi-hero-right">
        <div class="hoshi-chibi-card">
            <div class="avatar">#</div>
            <h4>{{ posts.total if posts else 0 }} 篇文章</h4>
            <p>标签别名：{{ tag.slug }}</p>
        </div>
    </div>
</section>
{% endblock %}

{% block content %}
<section class="hoshi-feed">
    {% if posts and posts.items %}
        {% for post in posts.items %}
            {% include 'partials/post_card.html' %}
        {% endfor %}
    {% else %}
    <div class="hoshi-card hoshi-empty">
        <p>没有与该标签相关的文章。</p>
    </div>
    {% endif %}
</section>

{% if posts and posts.pages > 1 %}
<nav class="hoshi-pagination">
    {% if posts.has_prev %}
    <a href="{{ url_for('main.tag', slug=tag.slug, page=posts.prev_num) }}">上一页</a>
    {% endif %}
    <span>{{ posts.page }} / {{ posts.pages }}</span>
    {% if posts.has_next %}
    <a href="{{ url_for('main.tag', slug=tag.slug, page=posts.next_num) }}">下一页</a>
    {% endif %}
</nav>
{% endif %}
{% endblock %}
