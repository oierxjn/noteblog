{% extends "base.html" %}

{% block title %}{{ category.name }} - {{ site_title or 'Noteblog' }}{% endblock %}

{% block hero %}
<section class="hoshi-hero" style="margin-top:1.5rem;">
    <div class="hoshi-hero-left">
        <span class="hoshi-hero-tag">Category</span>
        <h1 class="hoshi-hero-title">{{ category.name }}</h1>
        <p class="hoshi-hero-desc">{{ category.description or '该分类下的文章都闪烁着相似的星光。' }}</p>
    </div>
    <div class="hoshi-hero-right">
        <div class="hoshi-chibi-card">
            <div class="avatar">☽</div>
            <h4>{{ posts.total if posts else 0 }} 篇记录</h4>
            <p>最近更新：{{ (posts.items[0].published_at or posts.items[0].created_at).strftime('%Y-%m-%d') if posts and posts.items else '暂无' }}</p>
            <div class="hoshi-chibi-tags">
                <span>灵感</span>
                <span>{{ category.slug }}</span>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block content %}
<section class="hoshi-feed">
    {% if posts and posts.items %}
        {% for post in posts.items %}
            {% include 'partials/post_card.html' %}
        {% endfor %}
    {% else %}
    <div class="hoshi-card hoshi-empty">
        <p>这个分类还没有文章。</p>
    </div>
    {% endif %}
</section>

{% if posts and posts.pages > 1 %}
<nav class="hoshi-pagination">
    {% if posts.has_prev %}
    <a href="{{ url_for('main.category', slug=category.slug, page=posts.prev_num) }}">上一页</a>
    {% endif %}
    <span>{{ posts.page }} / {{ posts.pages }}</span>
    {% if posts.has_next %}
    <a href="{{ url_for('main.category', slug=category.slug, page=posts.next_num) }}">下一页</a>
    {% endif %}
</nav>
{% endif %}
{% endblock %}
